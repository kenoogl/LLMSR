# Trial 9: 物理制約付きウェイクモデル探索 (Phase 6 検証)

## 1. エグゼクティブサマリー
Trial 9 の目的は、進化的評価プロセスに明示的な物理ペナルティとLLMによる推論スコアを導入した **Phase 6「物理制約付き」フレームワーク** の検証でした。
実験の結果、この新しいフレームワークはシステムを **物理的に妥当なモデル**（ペナルティ = 0.0）へと強力に収束させることに成功し、過去のトライアルで問題となっていた数学的に不安定な構造や物理的に矛盾する構造（例：`nut`項の暴走、振動関数）を効果的に排除しました。

**主な成果:**
- **妥当性への収束**: ベストモデルは **物理ペナルティ 0.0** を達成しました。
- **堅牢な評価**: 新しいAPIベースの「Reason Score」はMSEと独立しており、論理的整合性を測る真の指標として機能することが検証されました。
- **安定した進化**: システムは一貫して `x^(-1)` の遠方減衰則を選択し、過学習による複雑化を拒絶しました。

---

## 2. 方法論 (Phase 6)

### 2.1 評価関数
Phase 6 の核心は、以下の複合スコアリング関数です：
$$ Score = MSE \times (1 + \sum P_i) \times (1 - 0.2 \times R_{score}) $$

- **MSE**: CFDデータ（高乱流ケース）に対する平均二乗誤差。
- **物理ペナルティ ($P_i$)**:
    - $P_1$: $x$ 方向の単調減衰（再加速の禁止）。
    - $P_2$: 半径方向の対称性。
    - $P_3$: 物理的な値の範囲 ($0 \le \Delta U \le 1.2$)。
    - $P_4$: 渦粘性 ($\nu_t$) との整合性。
- **Reason Score ($R_{score}$)**:
    - **Gemini 1.5 Pro** を用いた3段階チェーン評価（論理抽出 -> 物理検証 -> スコアリング）。
    - 範囲: 0.0（無意味）〜 1.0（完全な論理）。

### 2.2 実験設定
- **世代数**: 20世代
- **集団サイズ**: 20モデル/世代
- **戦略**: 物理制約付き進化（ペナルティ主導の淘汰）。

---

## 3. 結果

### 3.1 ベストモデル (第20世代)
- **数式**:
  ```julia
  a * x^(-1) * exp(-b*r^2)
  ```
- **係数**: `a ≈ 0.74`, `b ≈ 1.69`
- **指標**:
    - **MSE**: `0.000589`
    - **物理ペナルティ**: **0.0** (完全クリア)
    - **Reason Score**: 0.60

### 3.2 ベンチマーク比較
| モデル | MSE | 相対性能 | 物理的妥当性 |
| :--- | :--- | :--- | :--- |
| **Bastankhah (2014)** | `0.000289` | 1.00x (Baseline) | ✅ 妥当 |
| **Jensen (1983)** | `0.000476` | 0.61x | ✅ 妥当 |
| **Trial 9 Best** | `0.000589` | 0.49x | ✅ **妥当** |

*注: MSEは標準モデルよりわずかに劣りますが、最大の成果は **物理的妥当性の保証** です。過去のトライアルでは、より良いMSE（例: 0.000116）を出したものの、深刻な物理違反（負の速度、無限増大）を含むモデルが選ばれていました。*

---

## 4. 分析

### 4.1 進化のダイナミクス
- **初期フェーズ (Gen 1-5)**: `cos`, `sin`, 正の指数関数などを含むモデルは、巨大なペナルティ（$P_i > 10^9$）により即座に排除されました。
- **収束フェーズ (Gen 6-20)**: 集団は `x^(-1)` 減衰則に収束しました。`nut` や `k` 項を追加する試み（Gen 13, 16）はペナルティを受け、単純なガウスモデルの安定性が再確認されました。

### 4.2 Reason Score の検証
旧来のルールベース評価と新しいAPI評価の比較により、以下が明らかになりました：
- **旧評価**: MSEとの相関 99.9%（擬似相関）。
- **新API評価**: MSEとの相関 18.7%（独立）。
- **結論**: 新しいAPI評価は、システムが数値をハックするのを防ぐ、独立した「論理チェック」として正しく機能しています。

---

## 5. 結論と今後の展望

### 結論
Phase 6 は、進化プロセスに対する **「ガードレール」** の確立に成功しました。これにより、発見されたモデルが単なるデータ合わせの数式ではなく、物理的に尤もらしい後流挙動の記述であることを信頼できるようになりました。

### 今後の展望
1.  **制約の緩和**: 現在のペナルティは厳しすぎる可能性があり、複雑だが妥当な相互作用（例：`nut`項）の発見を妨げているかもしれません。
2.  **多様性ボーナス**: `x^(-1)` への早期収束を防ぐため、異なる減衰形式（例：`x^(-2/3)`）の探索を奨励する多様性ボーナスを導入すべきです。
3.  **多目的最適化**: MSEとペナルティを単一のスコアにまとめるのではなく、別々の目的関数（パレートフロント）として扱うことが考えられます。
